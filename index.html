<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>VisUFF</title>
        <script src="https://cdn.jsdelivr.net/npm/vega@5.4.0"></script>
        <script src="https://cdn.jsdelivr.net/npm/vega-lite@3.3.0"></script>
        <script src="https://cdn.jsdelivr.net/npm/vega-embed@4.2.0"></script>
    </head>
    <body>
        <div id="vis"></div>

        <script type="text/javascript">
            let interestingColumn = [
                'acousticness',
                'danceability',
                'energy',
                'instrumentalness',
                'liveness',
                'speechiness',
                'audio_valence'
            ];
            let revertedColumn = interestingColumn.slice(0);
            revertedColumn.reverse();

            let columnTranslation = {
                'acousticness': 'Grau acústico',
                'danceability': 'Grau dançante',
                'energy': 'Grau energético',
                'instrumentalness': 'Grau instrumental',
                'liveness': 'Grau ao vivo',
                'speechiness': 'Grau de palavras',
                'audio_valence': 'Grau emocional'
            };

            let interestingPlaylist = [ 
                'Adrenaline Workout',
                '90s Rock Anthems',
                '90s Acoustic',
                'Acoustic Covers',
                'Black History Salute',
                '80s Smash Hits',
                'All A Cappella',
                'Energizing Classics',
                'Rhythm & Dance',
                'Piano in the Background'
            ]

            let VlSpec = {
                data: {url: 'dataset/dataRaw.json'},
                transform: [
                    {filter: {field: 'playlist_name', oneOf: interestingPlaylist}}
                ],
                repeat:{
                    row: interestingColumn,
                    column: revertedColumn
                },
                spec:{
                    mark: 'rect',
                    encoding: {
                        x: {
                            field: {repeat: 'column'},
                            type: 'quantitative',
                            bin: {
                                extent: [0, 1],
                                step: 0.1
                            }
                        },
                        y: {
                            field: {repeat: 'row'},
                            type: 'quantitative',
                            bin: {
                                extent: [0, 1],
                                step: 0.1
                            }
                        },
                        color: {
                            field: 'playlist_name',
                            type: 'nominal'
                        }
                    }
                },
                config: {
                    axis: {
                        grid: {
                            grid: true
                        }
                    }
                }
            };
            vegaEmbed('#vis', VlSpec);
          </script>
    </body>
</html>
